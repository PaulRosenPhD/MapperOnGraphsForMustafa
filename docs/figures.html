<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">

    <!-- Icon -->
    <link rel="apple-touch-icon" sizes="57x57" href="favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="static/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <title>Mapper on Graphs</title>

    <script src="https://d3js.org/d3.v4.min.js"
            integrity="sha384-1EOYqz4UgZkewWm70NbT1JBUXSQpOIS2AaJy6/evZH+lXOrt9ITSJbFctNeyBoIJ"
            crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"
            integrity="sha384-hX5odjoulJel81+3dsnorXlZ7kA46f8qrV+2sBCcEAXaCyEAiRusFRjaefWw2NPp"
            crossorigin="anonymous"></script>

    <script src="js/GraphVisualization.js"></script>
    <script src="js/HistogramVisualization.js"></script>
    <script src="js/CoverVisualization.js"></script>
    <script src="js/common.js"></script>
    <script src="js/input.js"></script>
    <script src="js/graph_loader.js"></script>
</head>
<body>

<script>
	insert_navbar("figures.html");
    insert_page_header();
</script>

<div class="page">

     <div class="page-content" id="visualization" style="white-space: nowrap;">
        <div style="text-align: left; width: 1200px;">
            <svg height="512" width="512" style="border-style: solid; border-width: 1px;" id="figure"></svg>
<!--
            <div id="mog_row_agd">
                <p class="row_title" id="row1_title">
                    Figure ? <input type="button" value="Save Images" onclick="saveSVG('fig1_graph_agd'); saveSVG('fig1_mog_agd'); saveSVG('fig1_graph_den_0_5');
                        saveSVG('fig1_mog_den_0_5'); saveSVG('fig1_graph_ecc'); saveSVG('fig1_mog_ecc');
                        saveSVG('fig1_graph_fv'); saveSVG('fig1_mog_fv'); saveSVG('fig1_graph_pr_0_85'); saveSVG('fig1_mog_pr_0_85'); "/>
                </p>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_graph_agd"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_mog_agd"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_graph_den_0_5"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_mog_den_0_5"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_graph_ecc"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_mog_ecc"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_graph_fv"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_mog_fv"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_graph_pr_0_85"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig1_mog_pr_0_85"></svg>

            </div>

            <div id="mog_row_agd">
                <p class="row_title" id="row1_title">
                    Figure ? <input type="button" value="Save Images" onclick="saveSVG('fig2_mog_agd_2');
                        saveSVG('fig2_mog_agd_4'); saveSVG('fig2_mog_agd_8'); saveSVG('fig2_mog_agd_16'); "/>
                </p>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig2_mog_agd_2"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig2_mog_agd_4"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig2_mog_agd_8"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig2_mog_agd_16"></svg>
            </div>

            <div id="mog_row_agd">
                <p class="row_title" id="row1_title">
                    Figure ? <input type="button" value="Save Images" onclick="saveSVG('fig3_mog_agd_8_e0');
                        saveSVG('fig3_mog_agd_8_e1'); saveSVG('fig3_mog_agd_8_e2'); saveSVG('fig3_mog_agd_8_e4'); "/>
                </p>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig3_mog_agd_8_e0"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig3_mog_agd_8_e1"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig3_mog_agd_8_e2"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig3_mog_agd_8_e4"></svg>
            </div>

            <div id="mog_row_agd">
                <p class="row_title" id="row1_title">
                    Figure ? <input type="button" value="Save Images" onclick="saveSVG('fig4_mog_agd_8_connected_components');
                        saveSVG('fig4_mog_agd_8_modularity'); saveSVG('fig4_mog_agd_8_async_label_prop');"/>
                </p>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig4_mog_agd_8_connected_components"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig4_mog_agd_8_modularity"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig4_mog_agd_8_async_label_prop"></svg>
            </div>

            <div id="mog_row_agd">
                <p class="row_title" id="row1_title">
                    Figure ? <input type="button" value="Save Images" onclick="saveSVG('fig5_mog_agd_8_overlap');
                        saveSVG('fig5_mog_agd_8_connectivity');"/>
                </p>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig5_mog_agd_8_overlap"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig5_mog_agd_8_connectivity"></svg>
            </div>

            <div id="mog_visualization">
                <p class="row_title" id="row1_title">
                    Figure ? <input type="button" value="Save Images" onclick="saveSVG('fig6_histogram');
                        saveSVG('fig6_graph'); saveSVG('fig6_mog');"/>
                </p>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig6_histogram"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig6_graph"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig6_mog"></svg>
            </div>

            <div id="case_studies_airport">
                <p class="row_title" id="row1_title">
                    Figure ? <input type="button" value="Save Images" onclick="save_fig7()"/>
                </p>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_graph"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_agd_2"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_agd_4"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_agd_6"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_agd_8"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_agd_10"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_agd_20"></svg><br>

                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_den_0_5_2"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_den_0_5_4"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_den_0_5_6"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_den_0_5_8"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_den_0_5_10"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_den_0_5_20"></svg>    <br>

                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_ecc_2"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_ecc_4"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_ecc_6"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_ecc_8"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_ecc_10"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_ecc_20"></svg>    <br>

                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_fv_2"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_fv_4"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_fv_6"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_fv_8"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_fv_10"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_fv_20"></svg>    <br>

                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_pr_0_85_2"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_pr_0_85_4"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_pr_0_85_6"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_pr_0_85_8"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_pr_0_85_10"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig7_mog_pr_0_85_20"></svg>


            </div>



            <div id="case_studies_ca_condmat">
                <p class="row_title" id="row1_title">
                    Figure ? <input type="button" value="Save Images" onclick="save_fig8()"/>
                </p>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig8_graph"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig8_mog_pr_2"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig8_mog_pr_4"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig8_mog_pr_6"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig8_mog_pr_8"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig8_mog_pr_10"></svg>
                <svg height="200" width="200" style="border-style: solid; border-width: 1px;" id="fig8_mog_pr_20"></svg><br>
            </div>
        </div> -->
     </div>

</div>


<script>

    exps = []

    fig1 = ['agd', 'den_0_5', 'ecc', 'fv', 'pr_0_85']
    fig1.forEach( ff => {
        let opt = get_default_mog_options( 'small', 'usair97.json', ff, 8, false )
        exps.push({ name: 'fig1_mog_' + ff, type: 'mog', options: opt })
        exps.push({ name: 'fig1_graph_' + ff, type: 'graph_ff', options: opt  })
    })

    let fig2 = [2, 4, 8, 16]
    fig2.forEach( coverN => {
        let opt = get_default_mog_options( 'small', 'usair97.json', 'agd', coverN, false )
        exps.push({ name: 'fig2_mog_agd_' + coverN, type: 'mog', options: opt })
    })

    let fig3 = [0, 1, 2, 4]
    fig3.forEach( eps => {
        let opt = get_default_mog_options( 'small', 'usair97.json', 'agd', 8, false )
        opt.coverOverlap = eps/10
        exps.push({ name: 'fig3_mog_agd_8_e'+eps, type: 'mog', options: opt })
    })

    let fig4 = ['connected_components','modularity','async_label_prop']
    fig4.forEach( comp => {
        let opt = get_default_mog_options( 'small', 'usair97.json', 'agd', 8, false )
        opt.component_method = comp
        exps.push({ name: 'fig4_mog_agd_8_'+comp, type: 'mog', options: opt })
    })

    let fig5 = [['overlap',0.5],['connectivity',0]]
    fig5.forEach( link_overlap => {
        let link_m = link_overlap[0]
        let overlap = link_overlap[1]
        let opt = get_default_mog_options( 'small', 'usair97.json', 'agd', 8, false )
        opt.component_method = 'connected_components'
        opt.link_method = link_m
        opt.coverOverlap = overlap
        exps.push({ name: 'fig5_mog_agd_8_'+link_m, type: 'mog', options: opt })
    })


    let fig7 = ['agd', 'den_0_5', 'ecc', 'fv', 'pr_0_85']
    let cn = [2,3,4,6,8,10,20]
    fig7.forEach( ff_method => {
        cn.forEach( n => {
            let fig7_options = get_default_mog_options( 'small', 'map_of_science.json', 'agd', 2, false )
            fig7_options.component_method = 'modularity'
            fig7_options.link_method = 'connectivity'
            fig7_options.coverOverlap = 0
            fig7_options.coverN = n
            fig7_options.filter_func = ff_method
            exps.push({ name: 'fig7_mog_'+ff_method+"_"+n, type: 'mog', options: fig7_options })
        })
    })
    exps.push({ name: 'fig7_graph', type: 'graph', options: get_default_mog_options( 'small', 'map_of_science.json', 'agd', 2, false ) })


    let cn8 = [2,3,4,6,8,10]
    cn8.forEach( n => {
        let fig8_options = get_default_mog_options( 'large', 'ca-condmat.json', 'pr_0_85', 2, false )
        fig8_options.component_method = 'connected_components'
        fig8_options.link_method = 'connectivity'
        fig8_options.coverOverlap = 0
        fig8_options.coverN = n
        exps.push({ name: 'fig8_mog_pr_'+n, type: 'mog', options: fig8_options })
    })
    exps.push({ name: 'fig8_graph', type: 'graph', options: get_default_mog_options( 'large', 'ca-condmat.json', 'pr_0_85', 2, false ) })

    /*


        let fig6_options = get_default_mog_options( 'small', 'movies.json', 'fv', 6, false )
        fig6_options.component_method = 'modularity'
        fig6_options.link_method = 'connectivity'
        fig6_options.coverOverlap = 0
        Load_MOG_Vis( '#fig6_mog', fig6_options, false )
        Load_Graph_Vis_W_FF( '#fig6_graph', fig6_options, (gv, ff_data)=>{
            fig6_histo_vis = HistogramVisualization("#fig6_histogram");
            fig6_cover_vis = CoverVisualization("#fig6_histogram");
            fig6_cover_vis.set_position( 5, 5, 30, 190 );
            fig6_histo_vis.set_position( 40, 5, 80, 190 );
            fig6_cover_vis.update_drawing( fig6_options.coverN, 0, colorSchemes[fig6_options.filter_func] );
            fig6_histo_vis.update_drawing( 10, Object.values(ff_data.data), colorSchemes[fig6_options.filter_func] )
        } )



    */



    function nextExperiment() {
        d3.select("#figure").selectAll('*').remove()

        if(exps.length === 0 ) return
        exp = exps.pop()

        d3.xml("figures/" + exp.name + ".svg", function(xml) {
            if( xml != null ){
                nextExperiment()
            }
            else if( exp.type === 'mog' ){
                Load_MOG_Vis( '#figure', exp.options, true, ()=>{
                    saveSVG( '#figure', exp.name)
                    nextExperiment()
                } )
            }
            else if( exp.type === 'graph' ){
                Load_Graph_Vis( '#figure', exp.options, true, null, () => {
                    saveSVG( '#figure', exp.name)
                    nextExperiment()
                } )
            }
            else if( exp.type === 'graph_ff' ){
                Load_Graph_Vis_W_FF( '#figure', exp.options, true, null, () => {
                    saveSVG( '#figure', exp.name)
                    nextExperiment()
                } )
            }
            else{
                console.log("skipping: " + exp.name )
                nextExperiment()
            }
        })

    }

    nextExperiment()

    /*

        fig1 = ['agd', 'den_0_5', 'ecc', 'fv', 'pr_0_85']
        fig1.forEach( ff => {
            let options = get_default_mog_options( 'small', 'usair97.json', ff, 8, false )
            Load_MOG_Vis( '#fig1_mog_'+ff, options )
            Load_Graph_Vis_W_FF( '#fig1_graph_'+ff, options )

            Load_Filter_Function(options, (ff_data)=>{
                Load_Graph_Vis( '#fig1_graph_'+ff, options, ( gv )=>{
                    let cs = colorSchemes[ff].domain([0,1])
                    gv.set_node_color( n => cs(n), ff_data.data )
                } )
            })

        })

        let fig2 = [2, 4, 8, 16]
        fig2.forEach( coverN => {
            let options = get_default_mog_options( 'small', 'usair97.json', 'agd', coverN, false )
            Load_MOG_Vis( '#fig2_mog_agd_'+coverN, options, false )
        })

        let fig3 = [0, 1, 2, 4]
        fig3.forEach( eps => {
            let options = get_default_mog_options( 'small', 'usair97.json', 'agd', 8, false )
            options.coverOverlap = eps/10
            Load_MOG_Vis( '#fig3_mog_agd_8_e'+eps, options, false )
        })


        let fig4 = ['connected_components','modularity','async_label_prop']
        fig4.forEach( comp => {
            let options = get_default_mog_options( 'small', 'usair97.json', 'agd', 8, false )
            options.component_method = comp
            Load_MOG_Vis( '#fig4_mog_agd_8_'+comp, options, false )
        })


        let fig5 = [['overlap',0.5],['connectivity',0]]
        fig5.forEach( link_overlap => {
            let link_m = link_overlap[0]
            let overlap = link_overlap[1]
            let options = get_default_mog_options( 'small', 'usair97.json', 'agd', 8, false )
            options.component_method = 'connected_components'
            options.link_method = link_m
            options.coverOverlap = overlap
            Load_MOG_Vis( '#fig5_mog_agd_8_'+link_m, options, false )
        })


        let fig6_options = get_default_mog_options( 'small', 'movies.json', 'fv', 6, false )
        fig6_options.component_method = 'modularity'
        fig6_options.link_method = 'connectivity'
        fig6_options.coverOverlap = 0
        Load_MOG_Vis( '#fig6_mog', fig6_options, false )
        Load_Graph_Vis_W_FF( '#fig6_graph', fig6_options, (gv, ff_data)=>{
            fig6_histo_vis = HistogramVisualization("#fig6_histogram");
            fig6_cover_vis = CoverVisualization("#fig6_histogram");
            fig6_cover_vis.set_position( 5, 5, 30, 190 );
            fig6_histo_vis.set_position( 40, 5, 80, 190 );
            fig6_cover_vis.update_drawing( fig6_options.coverN, 0, colorSchemes[fig6_options.filter_func] );
            fig6_histo_vis.update_drawing( 10, Object.values(ff_data.data), colorSchemes[fig6_options.filter_func] )
        } )


        let fig7_options = get_default_mog_options( 'small', 'map_of_science.json', 'agd', 2, false )
        fig7_options.component_method = 'modularity'
        fig7_options.link_method = 'connectivity'
        fig7_options.coverOverlap = 0
        fig7 = ['agd', 'den_0_5', 'ecc', 'fv', 'pr_0_85']
        let cn = [2,3,4,6,8,10,20]
        fig7.forEach( ff_method => {
            cn.forEach( n => {
                fig7_options.coverN = n
                fig7_options.filter_func = ff_method
                Load_MOG_Vis( '#fig7_mog_'+ff_method+"_"+n, fig7_options, false )
            })
        })
        Load_Graph_Vis_W_FF( '#fig7_graph', fig7_options)

        function save_fig7(){
            saveSVG('fig7_graph');
            fig7.forEach( ff_method => {
                cn.forEach(n => {
                    saveSVG('fig7_mog_' + ff_method + "_" + n);
                })
            })
        }




        let fig8_options = get_default_mog_options( 'large', 'ca-condmat.json', 'pr_0_85', 2, false )
        fig8_options.component_method = 'connected_components'
        fig8_options.link_method = 'connectivity'
        fig8_options.coverOverlap = 0
        let cn8 = [2,3,4,6,8,10]
        cn8.forEach( n => {
            fig8_options.coverN = n
            Load_MOG_Vis( '#fig8_mog_pr_'+n, fig8_options, false )
        })
        Load_Graph_Vis_W_FF( '#fig8_graph', fig8_options)

        function save_fig8(){
            saveSVG('fig8_graph');
            cn8.forEach(n => {
                saveSVG('fig8_mog_pr_' + n);
            })
        }

*/



</script>


</body>
</html>

